<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="https://raw.github.com/jquery/jquery-tmpl/master/jquery.tmpl.min.js"></script>
</head>
<body>
<script type="text/javascript">
	var list = '[{"Name":"Xemnas","Realm":"Karazhan"},{"Name":"Xeonix","Realm":"Aszune"},{"Name":"Selva","Realm":"Aszune"}]';
	var characters = $.parseJSON(list);
	var totalKills = 0;
</script>
<script type="text/javascript">

$(document).ready(function() {
  // Handler for .ready() called.

	$(".result").empty();
	$(".totalKills").empty();
	$.each(characters, function(index, value) { 
			var myUrl = 'http://eu.battle.net/api/wow/character/'+value.Realm+'/'+value.Name+'?fields=pvp&jsonp=?';
			$.getJSON(myUrl, function(data) {
				totalKills = totalKills + data.pvp.totalHonorableKills;
				$(".totalKills").html(totalKills);
				$( "#wowTemplate" ).tmpl( data ).appendTo( ".result" );
			});
	});

});

</script>
<script id="wowTemplate" type="text/x-jquery-tmpl">
	<p><img src="http://eu.battle.net/static-render/eu/${thumbnail}"/> </p>
    <p><b>Name</b> ${name}</p>
	<p>realm</b> ${realm}</p>
	<p>battlegroup</b> ${battlegroup}</p>
	<p>level</b> ${level}</p>
	<p>achievementPoints</b> ${achievementPoints}</p>
	
	<p><b class="totalHonorableKills">totalHonorableKills</b> ${pvp.totalHonorableKills}</p>
	
 </script>

<h1>character test Rest API</h1>

<h2 class="totalKills"></h2>


<div class="result"></div>
</body>
</html>
